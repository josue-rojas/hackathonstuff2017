// Generated by CoffeeScript 2.0.2
(function() {
  document.addEventListener("DOMContentLoaded", function() {
    var positions, removeClass, scrollT, scrollTimeOut, submitForm;
    positions = [];
    window.getPositions = function() {
      positions = [];
      $('.view').each(function() {
        return positions.push($(this).position().top);
      });
      return positions;
    };
    getPositions();
    $(window).resize(getPositions);
    scrollTimeOut = null;
    window.scrollToPos = function(change, currPos, targetPos, down) {
      if (currPos === targetPos) {
        return;
      }
      currPos = currPos + change;
      if (down) {
        if (currPos > targetPos) {
          currPos = targetPos;
        }
        change = change > 0 && change < 30 ? change + .25 : change;
      } else {
        if (currPos < targetPos) {
          currPos = targetPos;
        }
        change = change < 0 && change > -30 ? change - .25 : change;
      }
      window.scrollTo(0, currPos);
      return scrollTimeOut = setTimeout(scrollToPos, 1, change, currPos, targetPos, down);
    };
    $(window).keydown(function(e) {
      var change, currPos, targetPos;
      currPos = $(this).scrollTop();
      if (e.which === 38) {
        clearTimeout(scrollTimeOut);
        targetPos = positions.filter(function(element) {
          return element < currPos;
        });
        targetPos = targetPos[targetPos.length - 1] ? targetPos[targetPos.length - 1] : positions[0];
        return scrollToPos(change = -.50, currPos, targetPos, false);
      } else if (e.which === 40) {
        clearTimeout(scrollTimeOut);
        targetPos = positions.find(function(element) {
          return element > currPos;
        });
        targetPos = targetPos ? targetPos : positions[positions.length - 1];
        return scrollToPos(change = .50, currPos, targetPos, true);
      }
    });
    // scroll navigations
    removeClass = function() {
      return $('.view.first').removeClass('isScroll');
    };
    scrollT = '';
    $(window).scroll(function() {
      $('.view.first').addClass('isScroll');
      clearTimeout(scrollT);
      return scrollT = setTimeout(removeClass, 200);
    });
    // scroll with press enter
    $(".form-control").on('keyup', function(e) {
      var change, currPos, targetPos;
      if (e.keyCode === 13) {
        currPos = $(window).scrollTop();
        clearTimeout(scrollTimeOut);
        targetPos = positions.find(function(element) {
          return element > currPos;
        });
        targetPos = targetPos ? targetPos : positions[positions.length - 1];
        return scrollToPos(change = .50, currPos, targetPos, true);
      }
    });
    // submit form
    return submitForm = function() {
      var age, city, ethnicity, gender, major, name;
      name = $('#nameForm').val();
      city = $('#cityForm').val();
      major = Math.floor($('#majorForm').val() / (school(major)));
      ethnicity = $('#ethinicityForm').val();
      gender = $('#genderForm').val();
      age = $('#ageForm').val();
      return alert('Name: ' + name + ' City: ' + city + ' Major: ' + major + ' Ethinicity: ' + ethnicity + ' Gender: ' + gender + ' Age: ' + age);
    };
  });

}).call(this);
